})
sapply(split(df_suite,df_suite$decennie),function(df_y){
#df_y<-df
#paste(names(sort(freq_dip)),collapse=",")
freq_dip<-sort(round(prop.table(table(ddipl_lib[as.character(df_y$ddipl)]))*100,2))
plot(freq_dip, ylab = 'pourcentage', cex.axis=2)
title(main=paste("moyenne sur la décennie",df_y[1,]$decennie*10,sep=" "),cex.main=1.2)
text(seq_along(freq_dip),
srt = 60, adj= 1,-300,xpd = TRUE,
labels = names(freq_dip), cex=10)
})
sapply(split(df_suite,df_suite$decennie),function(df_y){
#df_y<-df
#paste(names(sort(freq_dip)),collapse=",")
freq_dip<-sort(round(prop.table(table(ddipl_lib[as.character(df_y$ddipl)]))*100,2))
plot(freq_dip, ylab = 'pourcentage', cex.axis=1.2)
title(main=paste("moyenne sur la décennie",df_y[1,]$decennie*10,sep=" "),cex.main=1.2)
text(seq_along(freq_dip),
srt = 60, adj= 1,-300,xpd = TRUE,
labels = names(freq_dip), cex=10)
})
sapply(split(df_suite,df_suite$decennie),function(df_y){
#df_y<-df
#paste(names(sort(freq_dip)),collapse=",")
freq_dip<-sort(round(prop.table(table(ddipl_lib[as.character(df_y$ddipl)]))*100,2))
plot(freq_dip, ylab = 'pourcentage', cex.axis=1.2)
title(main=paste("moyenne sur la décennie",df_y[1,]$decennie*10,sep=" "),cex.main=1.5)
text(seq_along(freq_dip),
srt = 60, adj= 1,-300,xpd = TRUE,
labels = names(freq_dip), cex=10)
})
?plot
sapply(split(df_suite,df_suite$decennie),function(df_y){
#df_y<-df
#paste(names(sort(freq_dip)),collapse=",")
freq_dip<-sort(round(prop.table(table(ddipl_lib[as.character(df_y$ddipl)]))*100,2))
plot(freq_dip, ylab = 'pourcentage', cex.axis=1.2)
title(main=paste("moyenne sur la décennie",df_y[1,]$decennie*10,sep=" "),cex.main=1.5, cex.lab = 1.5)
text(seq_along(freq_dip),
srt = 60, adj= 1,-300,xpd = TRUE,
labels = names(freq_dip), cex=10)
})
sapply(split(df_suite,df_suite$decennie),function(df_y){
#df_y<-df
#paste(names(sort(freq_dip)),collapse=",")
freq_dip<-sort(round(prop.table(table(ddipl_lib[as.character(df_y$ddipl)]))*100,2))
plot(freq_dip, ylab = 'pourcentage', cex.axis=1.2)
title(main=paste("moyenne sur la décennie",df_y[1,]$decennie*10,sep=" "),cex.main=1.5, cex.lab = 15)
text(seq_along(freq_dip),
srt = 60, adj= 1,-300,xpd = TRUE,
labels = names(freq_dip), cex=10)
})
sapply(split(df_suite,df_suite$decennie),function(df_y){
#df_y<-df
#paste(names(sort(freq_dip)),collapse=",")
freq_dip<-sort(round(prop.table(table(ddipl_lib[as.character(df_y$ddipl)]))*100,2))
plot(freq_dip, ylab = 'pourcentage', cex.axis=1.5, cex.lab = 1.5)
title(main=paste("moyenne sur la décennie",df_y[1,]$decennie*10,sep=" "),cex.main=1.2)
text(seq_along(freq_dip),
srt = 60, adj= 1,-300,xpd = TRUE,
labels = names(freq_dip), cex=10)
})
sapply(split(df_suite,df_suite$decennie),function(df_y){
#df_y<-df
#paste(names(sort(freq_dip)),collapse=",")
freq_dip<-sort(round(prop.table(table(ddipl_lib[as.character(df_y$ddipl)]))*100,2))
plot(freq_dip, ylab = 'pourcentage', cex.axis=1.5, cex.lab = 1.5)
title(main=paste("moyenne sur la décennie",df_y[1,]$decennie*10,sep=" "),cex.main=2)
text(seq_along(freq_dip),
srt = 60, adj= 1,-300,xpd = TRUE,
labels = names(freq_dip), cex=10)
})
par(mfrow=c(2,2))
sapply(split(df_suite,df_suite$decennie),function(df_y){
#df_y<-df
#paste(names(sort(freq_dip)),collapse=",")
freq_dip<-sort(round(prop.table(table(ddipl_lib[as.character(df_y$ddipl)]))*100,2))
plot(freq_dip, ylab = 'pourcentage', cex.axis=1.5, cex.lab = 1.5)
title(main=paste("moyenne sur la décennie",df_y[1,]$decennie*10,sep=" "),cex.main=2)
text(seq_along(freq_dip),
srt = 60, adj= 1,-300,xpd = TRUE,
labels = names(freq_dip), cex=10)
})
-5.32e-4
rm(list=ls())
gc()
library(data.table)
library(foreign)
library(plyr)
df = fread('C:/Users/Hugues/Desktop/Cours Ensae/econo/table_finale.csv')
colnames(df)
?aggregate
aggregate(df, by = c("noi"), sum)
aggregate(df, by = list(c("noi")), sum)
aggregate(df, by = df[,c('noi')], sum)
aggregate(df, by = df[,c('noi')], length)
aggregate(df, by = df[,c('noi')], length(df$annee))
aggregate(df, by = df[,c('noi')], function(df) return(length(df$annee)))
aggregate(df$annee, by = df[,c('noi')], length)
df$noi
aggregate(df$annee, by = df[,c('ident')], length)
?sort
df[order(df$annee)]
dfa[order(dfa$x)]
dfa = aggregate(df$annee, by = df[,c('ident')], length)
dfa = dfa[order(dfa$x)]
dfa = dfa[,order(dfa$x)]
dfa = dfa[order(dfa$x),]
head(dfa)
dfa = dfa[-order(dfa$x),]
head(dfa)
dfa = dfa[order(-dfa$x),]
head(dfa)
dfa = aggregate(df$annee, by = df[,c('ident')], length)
dfa = dfa[order(-dfa$x),]
head(dfa)
dfa[100,]
dfa[dfa$x>8,]
dfa[dfa$x>=8,]
length(dfa[dfa$x>=8,])
nrow(dfa[dfa$x>=8,])
dfa = aggregate(df$annee, by = df[,c('ident','noi')], length)
dfa = dfa[order(-dfa$x),]
nrow(dfa[dfa$x>=8,])
dfa
dfa = aggregate(df$annee, by = df[,c('ident')], length)
dfa = dfa[order(-dfa$x),]
ind = dfa[dfa$x>=8,]$ident
df[dfa %in% ind,]
ind
df[df$ident %in% ind,]
df[df$ident %in% ind,]$annee
df = df[df$annee >2004 & df$annee < 2011,]
dfa = aggregate(df$annee, by = df[,c('ident')], length)
ind = dfa[dfa$x == 5,]$ident
ind
df = df[df$ident %in% ind,]
df
932*5
df = fread('C:/Users/Hugues/Desktop/Cours Ensae/econo/table_finale.csv')
df = df[df$annee >2006 & df$annee < 2013,]
dfa = aggregate(df$annee, by = df[,c('ident')], length)
ind = dfa[dfa$x == 5,]$ident
length(ind)
#on garde foyers ou tout le temps la entre 2005 et 2010
#on en a 4660
df = df[df$ident %in% ind,]
df
length(ind)
?aggregate
aggregate(df$noi, by = df[,c('ident')], sd)
test = aggregate(df$noi, by = df[,c('ident')], sd)
test[test$x == 1,]
nrow(test[test$x == 1,])
df = fread('C:/Users/Hugues/Desktop/Cours Ensae/econo/table_finale.csv')
df = df[df$annee >2005 & df$annee < 2011,]
dfa = aggregate(df$annee, by = df[,c('ident')], length)
ind = dfa[dfa$x == 5,]$ident
#on garde foyers ou tout le temps la entre 2005 et 2010
#on en a 1072. Il s'agit de vérifier si ce sont toujours les mêmes personnes
df = df[df$ident %in% ind,]
df
test = aggregate(df$noi, by = df[,c('ident')], sd)
nrow(test[test$x == 1,])
df = fread('C:/Users/Hugues/Desktop/Cours Ensae/econo/table_finale.csv')
df = df[df$annee >2006& df$annee < 2012,]
dfa = aggregate(df$annee, by = df[,c('ident')], length)
ind = dfa[dfa$x == 5,]$ident
#on garde foyers ou tout le temps la entre 2005 et 2010
#on en a 1072. Il s'agit de vérifier si ce sont toujours les mêmes personnes
df = df[df$ident %in% ind,]
df
test = aggregate(df$noi, by = df[,c('ident')], sd)
nrow(test[test$x == 1,])
nrow(test[test$x == 0,])
sd(c(1,1,1,1))
var(c(1,1,1,1))
test = aggregate(df$noi, by = df[,c('ident')])
?group_by
test = df %>% group_by(ident')
test = df %>% group_by(ident)
''
test = df %>% group_by(ident)
df
df = fread('C:/Users/Hugues/Desktop/Cours Ensae/econo/table_finale.csv')
df = df[df$annee >2006& df$annee < 2012,]
dfa = aggregate(df$annee, by = df[,c('ident_ind')], length)
ind = dfa[dfa$x == 5,]$ident
ind
df = fread('C:/Users/Hugues/Desktop/Cours Ensae/econo/table_finale.csv')
df = df[df$annee >2006 & df$annee < 2010,]
dfa = aggregate(df$annee, by = df[,c('ident_ind')], length)
ind = dfa[dfa$x == 3,]$ident
ind
dfa
df = fread('C:/Users/Hugues/Desktop/Cours Ensae/econo/table_finale.csv')
df = df[df$annee >2007 & df$annee < 2010,]
dfa = aggregate(df$annee, by = df[,c('ident_ind')], length)
ind = dfa[dfa$x == 2,]$ident
ind
#on garde foyers ou tout le temps la entre 2005 et 2010
#on en a 1072. Il s'agit de vérifier si ce sont toujours les mêmes personnes
df = df[df$ident %in% ind,]
df
df = fread('C:/Users/Hugues/Desktop/Cours Ensae/econo/table_finale.csv')
df = df[df$annee >2007 & df$annee < 2010,]
dfa = aggregate(df$annee, by = df[,c('ident_ind')], length)
ind = dfa[dfa$x == 2,]$ident
ind
#on individus la en 2008 et 2009. On en a 8000 environ
df = df[df$ident_ind %in% ind,]
df
15896/2
write.dta(df, "C:/Users/Hugues/Desktop/Cours Ensae/econo/Codes.dta")
df[!is.na(df$ddipl) & !is.na(df$salmee) & df$salmee >500 & !(df$salmee %in% c(9999998,9999999))]
df
df = fread('C:/Users/Hugues/Desktop/Cours Ensae/econo/table_finale.csv')
df[!is.na(df$ddipl) & !is.na(df$salmee) & df$salmee >500 & !(df$salmee %in% c(9999998,9999999))]
df = df[df$annee >2007 & df$annee < 2010,]
dfa = aggregate(df$annee, by = df[,c('ident_ind')], length)
ind = dfa[dfa$x == 2,]$ident
ind
df = fread('C:/Users/Hugues/Desktop/Cours Ensae/econo/table_finale.csv')
df = df[!is.na(df$ddipl) & !is.na(df$salmee) & df$salmee >500 & !(df$salmee %in% c(9999998,9999999))]
df = df[df$annee >2007 & df$annee < 2010,]
dfa = aggregate(df$annee, by = df[,c('ident_ind')], length)
ind = dfa[dfa$x == 2,]$ident
ind
#on individus la en 2008 et 2009. On en a 185 environ
df = df[df$ident_ind %in% ind,]
df
write.dta(df[,c('ident_ind, salmee, ddipl, exp_po')], "C:/Users/Hugues/Desktop/Cours Ensae/econo/Codes.dta")
df[,c('ident_ind, salmee, ddipl, exp_po')]
df
write.dta(df[,c('ident_ind', 'salmee', 'ddipl', 'exp_po')], "C:/Users/Hugues/Desktop/Cours Ensae/econo/Codes.dta")
write.dta(df[,c('ident_ind', 'salmee', 'ddipl', 'exp_po')], "C:/Users/Hugues/Desktop/Cours Ensae/econo/test_ex_str.dta")
df2$salmee_dif = df[df$annee = 2009,]$salmee - df[df$annee = 2008,]$salmee
df2 = df[df$annee = 2009,]$annee
df2$salmee_dif = df[df$annee = 2009,]$salmee - df[df$annee = 2008,]$salmee
df2 = df[df$annee = 2009,][c('annee','ddipl')]
df2 = df[df$annee = 2009,c('annee','ddipl')]
df2 = df[df$annee == 2009,c('annee','ddipl')]
df2$salmee_dif = df[df$annee = 2009,]$salmee - df[df$annee = 2008,]$salmee
df2$salmee_dif = df[df$annee == 2009,]$salmee - df[df$annee == 2008,]$salmee
df2$exp_po = df[df$annee == 2009,]$annee/2009
df2$exp_po
df2$sal2 = df[df$annee == 2009,]$salmee
df2$ddipl = df[df$annee == 2009,]$ddipl
write.dta(df2[,c('sal2', 'salmee_dif', 'ddipl', 'exp_po')], "C:/Users/Hugues/Desktop/Cours Ensae/econo/test_ex_str.dta")
df2 = df[df$annee == 2009,c('annee','ddipl')]
df2$salmee_dif = df[df$annee == 2009,]$salmee - df[df$annee == 2008,]$salmee
df2$exp_po = df[df$annee == 2009,]$annee/2009
df2$sal2 = df[df$annee == 2009,]$salmee
df2$annee_etude = df[df$annee == 2009,]$annee_etude
write.dta(df2[,c('sal2', 'salmee_dif', 'ddipl', 'exp_po')], "C:/Users/Hugues/Desktop/Cours Ensae/econo/test_ex_str.dta")
df2 = df[df$annee == 2009,c('annee','ddipl')]
df2$salmee_dif = df[df$annee == 2009,]$salmee - df[df$annee == 2008,]$salmee
df2$exp_po = df[df$annee == 2009,]$annee/2009
df2$sal2 = df[df$annee == 2009,]$salmee
df2$annee_etude = df[df$annee == 2009,]$annee_etude
write.dta(df2[,c('sal2', 'salmee_dif', 'ddipl', 'exp_po', 'annee_etude')], "C:/Users/Hugues/Desktop/Cours Ensae/econo/test_ex_str.dta")
df2$salmee_dif = df[df$annee == 2009,]$salmee - df[df$annee == 2008,]$salmee + 1
df2$exp_po = df[df$annee == 2009,]$annee/2009
df2$sal2 = df[df$annee == 2009,]$salmee
df2$annee_etude = df[df$annee == 2009,]$annee_etude
write.dta(df2[,c('sal2', 'salmee_dif', 'ddipl', 'exp_po', 'annee_etude')], "C:/Users/Hugues/Desktop/Cours Ensae/econo/test_ex_str.dta")
log(df$annee)
df2 = df[df$annee == 2009,c('annee','ddipl')]
df2$salmee_dif = log(df[df$annee == 2009,]$salmee) - log(df[df$annee == 2008,]$salmee)
df2$exp_po = df[df$annee == 2009,]$annee/2009
df2$salmee2 = log(df[df$annee == 2009,]$salmee)
df2$annee_etude = df[df$annee == 2009,]$annee_etude
write.dta(df2[,c('salmee2', 'salmee_dif', 'exp_po', 'annee_etude')], "C:/Users/Hugues/Desktop/Cours Ensae/econo/test_ex_str.dta")
df2$salmee_dif = log(df[df$annee == 2009,]$salmee) - log(df[df$annee == 2008,]$salmee)
df2$exp_po = df[df$annee == 2009,]
df2$salmee2 = log(df[df$annee == 2009,]$salmee)
df2$annee_etude = df[df$annee == 2009,]$annee_etude
write.dta(df2[,c('salmee2', 'salmee_dif', 'exp_po', 'annee_etude')], "C:/Users/Hugues/Desktop/Cours Ensae/econo/test_ex_str.dta")
df2 = df[df$annee == 2009,c('annee','ddipl')]
df2$salmee_dif = log(df[df$annee == 2009,]$salmee) - log(df[df$annee == 2008,]$salmee)
df2$exp_po = df[df$annee == 2009,]$exp_po
df2$salmee2 = log(df[df$annee == 2009,]$salmee)
df2$annee_etude = df[df$annee == 2009,]$annee_etude
write.dta(df2[,c('salmee2', 'salmee_dif', 'exp_po', 'annee_etude')], "C:/Users/Hugues/Desktop/Cours Ensae/econo/test_ex_str.dta")
df[df$annee == 2009,]$exp_po - df[df$annee == 2008,]$exp_po
df[df$annee == 2009,]$annee_etude - df[df$annee == 2008,]$annee_etude
10000/12
rm(list=ls())
gc()
library(data.table)
library(readstata13)
path = 'C:/Users/Hugues/Desktop/Cours Ensae/econo'
fread(paste0(path, 'retard_6eme.xlsx'), sheet = 1)
fread(paste0(path, 'retard_6eme.xlsx'))
fread(paste0(path, '/retard_6eme.xlsx'))
library("readxl")
library(readxl)
install.packages("readxl")
rm(list=ls())
gc()
library(data.table)
library(readxl)
library(readstata13)
path = 'C:/Users/Hugues/Desktop/Cours Ensae/econo'
read_excel(paste0(path, '/retard_6eme.xlsx'))
read_excel(paste0(path, '/retard_6eme.xls'))
retard_6m = read_excel(paste0(path, '/retard_6eme.xls'))[-c(1,2,3,4),]
retard_6m
retard_6m = read_excel(paste0(path, '/retard_6eme.xls'))[-c(1,2,3,4,5),]
retard_6m
?read_excel
retard_6m = read_excel(paste0(path, '/retard_6eme.xls'), col_names = F)[-c(1,2,3,4,5),]
retard_6m
retard_6m = read_excel(paste0(path, '/retard_6eme.xls'), col_names = F)[-c(1,2,3,4,5,6),]
retard_6m
retard_6m = read_excel(paste0(path, '/retard_6eme.xls'), col_names = F, skip = 4)
retard_6m
retard_6m = read_excel(paste0(path, '/retard_6eme.xls'), col_names = F, skip = 6)
retard_6m
retard_6m[:,]
retard_6m[c('...1','...2','...3')]
retard_6m$...1
class(retard_6m)
retard_6m[c('...1','...2','...3')]
as.data.frame(retard_6m)
r_6m = read_excel(paste0(path, '/retard_6eme.xls'), col_names = F, skip = 6)
as.data.frame(r_6m)
r_6m = r_6m[!is.na(r_6m)]
r_6m = r_6m[!is.na(r_6m$...1)]
r_6m = read_excel(paste0(path, '/retard_6eme.xls'), col_names = F, skip = 6)
as.data.frame(r_6m)
r_6m = r_6m[!is.na(r_6m$...1)]
r_6m = as.data.frame(r_6m)
r_6m = r_6m[!is.na(r_6m$...1)]
r_6m = read_excel(paste0(path, '/retard_6eme.xls'), col_names = F, skip = 6)
r_6m = as.data.frame(r_6m)
r_6m = r_6m[!is.na(r_6m$...1)]
r_6m = read_excel(paste0(path, '/retard_6eme.xls'), col_names = F, skip = 6)
r_6m = as.data.frame(r_6m)
r_6m = r_6m[!is.na(r_6m$...1),]
r_6m
r_6m$...1
r_6m$...2
class(r_6m$...1)
class(r_6m$...2)
?read_excel
r_6m = read_excel(paste0(path, '/retard_6eme.xls'), col_names = c('num','nom','pourcentage'), skip = 6)
r_6m = as.data.frame(r_6m)
r_6m = r_6m[!is.na(r_6m$num),]
class(r_6m$nom)
r_6m$nom
esp_vie = read_excel(paste0(path, '/esp_vie.xls'), col_names = F, skip = 6)
esp_vie = as.data.frame(esp_vie)
esp_vie
esp_vie = read_excel(paste0(path, '/esp_vie.xls'), col_names = c('departement','esperance'), skip = 6)
esp_vie = read_excel(paste0(path, '/esp_vie.xls'), col_names = c('departement','esperance',1,2,3,4,5,6), skip = 6)
esp_vie = as.data.frame(esp_vie)[,c('departement','esperance')]
esp_vie
esp_vie = esp_vie[!in.na(esp_vie$departement),]
esp_vie = esp_vie[!is.na(esp_vie$departement),]
esp_vie
r_6m
esp_vie
r_6m
?cbind
esp_vie = read_excel(paste0(path, '/esp_vie.xls'), col_names = c('nom','esperance',1,2,3,4,5,6), skip = 6)
esp_vie = as.data.frame(esp_vie)[,c('departement','esperance')]
esp_vie = as.data.frame(esp_vie)[,c('nom','esperance')]
esp_vie = esp_vie[!is.na(esp_vie$departement),]
esp_vie
esp_vie = read_excel(paste0(path, '/esp_vie.xls'), col_names = c('nom','esperance',1,2,3,4,5,6), skip = 6)
esp_vie = as.data.frame(esp_vie)[,c('nom','esperance')]
esp_vie = esp_vie[!is.na(esp_vie$departement),]
esp_vie
esp_vie = read_excel(paste0(path, '/esp_vie.xls'), col_names = c('nom','esperance',1,2,3,4,5,6), skip = 6)
esp_vie = as.data.frame(esp_vie)[,c('nom','esperance')]
esp_vie = esp_vie[!is.na(esp_vie$nom),]
esp_vie
cbind(r_6m, esp_vie)
merge(r_6m, esp_vie, by='nom',add=F)
merge(r_6m, esp_vie, by='nom',add=T)
r_6m$nom
esp_vie$nom
esp_vie = read_excel(paste0(path, '/esp_vie.xls'), col_names = c('num','esperance',1,2,3,4,5,6), skip = 6)
esp_vie = as.data.frame(esp_vie)[,c('num','esperance')]
esp_vie = esp_vie[!is.na(esp_vie$num),]
esp_vie
esp_vie = read_excel(paste0(path, '/esp_vie.xls'), col_names = c('num','nom','esperance',1,2,3,4,5), skip = 5)
esp_vie = as.data.frame(esp_vie)[,c('num','nom','esperance')]
esp_vie = esp_vie[!is.na(esp_vie$num),]
esp_vie
r_6m$num
esp_vie$num
r_6m$num
esp_vie$num
merge(r_6m, esp_vie, by='num',add=T)
merge(r_6m, esp_vie, by=c('num','nom'),add=T)
merge(r_6m, esp_vie, by=c('num','nom'),add=F)
r_6m = read_excel(paste0(path, '/retard_6eme.xls'), col_names = c('num','nom','ret_6m'), skip = 6)
r_6m = as.data.frame(r_6m)
r_6m = r_6m[!is.na(r_6m$num),]
r_6m
esp_vie = read_excel(paste0(path, '/esp_vie.xls'), col_names = c('num','nom','esp_vie',1,2,3,4,5), skip = 5)
esp_vie = as.data.frame(esp_vie)[,c('num','nom','esp_vie')]
esp_vie = esp_vie[!is.na(esp_vie$num),]
esp_vie
r_6m$num
esp_vie$num
departement = merge(r_6m, esp_vie, by=c('num','nom'),add=F)
departement = merge(r_6m, esp_vie, by=c('num','nom'),add=F)
departement
departement$esp_vie %/% 0.01
departement$ret_6m = as.numeric(departement$ret_6m) %/% 0.01
?round
departement = merge(r_6m, esp_vie, by=c('num','nom'),add=F)
departement$ret_6m = round(as.numeric(departement$ret_6m), 2)
departement$esp_vie = round(as.numeric(departement$esp_vie), 2)
departement
?read_excel
taux_chom = read_excel(paste0(path, '/taux_chomage.xls'))
taux_chom
taux_chom = read_excel(paste0(path, '/taux_chomage.xls'),skip=6)
taux_chom
taux_chom = read_excel(paste0(path, '/taux_chomage.xls'),skip=5)
taux_chom
taux_chom = read_excel(paste0(path, '/taux_chomage.xls'),skip=3)
taux_chom
taux_chom = read_excel(paste0(path, '/taux_chomage.xls'),col_names = c('num-nom',2,6,12),skip=3)
taux_chom = read_excel(paste0(path, '/taux_chomage.xls'),col_names = c('num-nom',2,6,12,15),skip=3)
taux_chom
taux_chom = as.data.frame(taux_chom)
taux_chom
taux_chom = taux_chom[-c(1,2),]
taux_chom
str_split_fixed(taux_chom$nom, "-", 2)
library(stringr)
str_split_fixed(taux_chom$nom, "-", 2)
out <- str_split_fixed(taux_chom$nom, "-", 2)
do.call(rbind, out)
out <- str_split_fixed(taux_chom$num-nom, "-", 2)
taux_chom = read_excel(paste0(path, '/taux_chomage.xls'),col_names = c('nom',2,6,12,15),skip=3)
taux_chom = as.data.frame(taux_chom)
taux_chom = taux_chom[-c(1,2),]
taux_chom
str_split_fixed(taux_chom$nom, "-", 2)
do.call(rbind, out)
out <- str_split_fixed(taux_chom$nom, "-", 2)
do.call(rbind, out)
out
class(str_split_fixed(taux_chom$nom, "-", 2))
as.data.frame(str_split_fixed(taux_chom$nom, "-", 2))
taux_chom = read_excel(paste0(path, '/taux_chomage.xls'),col_names = c('nom',2,6,12,15),skip=3)
taux_chom = as.data.frame(taux_chom)
taux_chom = taux_chom[-c(1,2,119),]
taux_chom
taux_chom = read_excel(paste0(path, '/taux_chomage.xls'),col_names = c('nom',2,6,12,15),skip=3)
taux_chom = as.data.frame(taux_chom)
taux_chom
taux_chom = taux_chom[-c(1,2,121),]
taux_chom
rbind(as.data.frame(str_split_fixed(taux_chom$nom, "-", 2)))
taux_chom = rbind(chom, taux_chom)
chom = rbind(as.data.frame(str_split_fixed(taux_chom$nom, "-", 2)))
taux_chom = rbind(chom, taux_chom)
nrow(chom)
nrow(taux_chom)
rownames(taux_chom) <- NULL
taux_chom = rbind(chom, taux_chom)
taux_chom = cbind(chom, taux_chom)
taux_chom
taux_chom = cbind(chom, taux_chom)[,-c('nom')]
taux_chom = cbind(chom, taux_chom)[,c('v1','v2',2,6,12,15)]
taux_chom = cbind(chom, taux_chom)[,c('v1','v2','2','6','12','15')]
taux_chom = cbind(chom, taux_chom)[,c('V1','V2','2','6','12','15')]
taux_chom
taux_chom = cbind(chom, taux_chom)[,c('V1','2','6','12','15')]
taux_chom
taux_chom$2 = as.integer(taux_chom$2)
taux_chom$6 = as.integer(taux_chom$6)
taux_chom$12 = as.integer(taux_chom$12)
taux_chom$15 = as.integer(taux_chom$15)
taux_chom = read_excel(paste0(path, '/taux_chomage.xls'),col_names = c('nom','an1','an2','an3','an4'),skip=3)
taux_chom = as.data.frame(taux_chom)
taux_chom = taux_chom[-c(1,2,121),]
chom = rbind(as.data.frame(str_split_fixed(taux_chom$nom, "-", 2)))
taux_chom = cbind(chom, taux_chom)[,c('V1','an1','an2','an3','an4')]
taux_chom$an1 = as.integer(taux_chom$an1)
taux_chom$an2 = as.integer(taux_chom$an2)
taux_chom$an3 = as.integer(taux_chom$an3)
taux_chom$an4 = as.integer(taux_chom$an4)
moy = rowMeans(taux_chom[,c('an1','an2','an3','an4')])
moy
data.frame(num=taux_chom$V1, Means=taux_chom[,c('an1','an2','an3','an4')])
data.frame(num=taux_chom$V1, Means=rowMeans(taux_chom[,c('an1','an2','an3','an4')]))
taux_chom = data.frame(num=taux_chom$V1, Means=rowMeans(taux_chom[,c('an1','an2','an3','an4')]))
taux_chom = read_excel(paste0(path, '/taux_chomage.xls'),col_names = c('nom','an1','an2','an3','an4'),skip=3)
taux_chom = as.data.frame(taux_chom)
taux_chom = taux_chom[-c(1,2,121),]
chom = rbind(as.data.frame(str_split_fixed(taux_chom$nom, "-", 2)))
taux_chom = cbind(chom, taux_chom)[,c('V1','an1','an2','an3','an4')]
taux_chom$an1 = as.integer(taux_chom$an1)
taux_chom$an2 = as.integer(taux_chom$an2)
taux_chom$an3 = as.integer(taux_chom$an3)
taux_chom$an4 = as.integer(taux_chom$an4)
taux_chom = data.frame(num=taux_chom$V1, chomage_moy=rowMeans(taux_chom[,c('an1','an2','an3','an4')]))
departement = merge(departement, taux_chom, by = 'num')
departement
fwrite(departement,paste0(path,"/departements.csv")
fwrite(departement,paste0(path,"/departements.csv"))
fwrite(departement,paste0(path,"/departements.csv"))
write.dta(departement,paste0(path,"/departements.csv"))
write.dta(departement,paste0(path,"/departements.dta"))
